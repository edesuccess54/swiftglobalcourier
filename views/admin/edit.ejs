<%- include('./partials/header') %> 

    
    <main>
        <div class="mainWrapper">
            <%- include("./partials/sideBar") %> 
            <div class="rightContent">
                <%- include('./partials/topBar') %> 
                <div class="mainContent">
                    <div class="formContainer">
                        <form class="editForm">
                            <h2>Edit Package</h2>
                            <div class="formWrapper">
                                <div class="inputGroup">
                                    <label for="">Sender's Name:</label>
                                    <input type="text" name="" value="<%= singlepackage.sendersName %>">
                                </div>
    
                                <div class="inputGroup">
                                    <label for="">Sender's Email:</label>
                                    <input type="text" name="" value="<%= singlepackage.sendersEmail%>">
                                </div>
    
                                <div class="inputGroup">
                                    <label for="">Receiver's Name</label>
                                    <input type="text" name="" value="<%= singlepackage.receiversName%>">
                                </div>
    
                                <div class="inputGroup">
                                    <label for="">Receiver's Email</label>
                                    <input type="text" name="" value="<%= singlepackage.receiversEmail%>">
                                </div>

                                <div class="inputGroup">
                                    <label for="">Receiver's Number</label>
                                    <input type="text" name="" value="<%= singlepackage.receiversNumber%>">
                                </div>
    
                                <div class="inputGroup">
                                    <label for="">Destination Address</label>
                                    <input type="text" name="" value="<%= singlepackage.receiversAddress%>">
                                </div>

                                <div class="inputGroup">
                                    <label for="">package </label>
                                    <input type="text" name="" placeholder="what are you sending to client?" value="<%= singlepackage.item%>">
                                </div>

                                <div class="inputGroup">
                                    <label for="">weight</label>
                                    <input type="text" name="" value="<%= singlepackage.weight%>">
                                </div>

                                <div class="inputGroup">
                                    <label for="">Current Location</label>
                                    <input type="text" name="" value="<%= singlepackage.location %>">
                                </div>

                                <div class="inputGroup">
                                    <label for="">Depature Date</label>
                                    <input type="date" name="" value="<%= singlepackage.depatureDate%>">
                                </div>

                                <div class="inputGroup">
                                    <label for="">Expected Delivery Date</label>
                                    <input type="date" name="" value="<%= singlepackage.deliveryDate%>">
                                </div>

                                <div class="inputGroup">
                                    <label for="">Shipment Method</label>
                                    <select name="" id="">
                                        <option  disabled>--select shipment method--</option>
                                        <option selected value="Express Delivery">Express Delivery</option>
                                    </select>
                                </div>

                                <div class="inputGroup">
                                    <label for="">Pickup Date & time</label>
                                    <input type="date" name="" value="<%= singlepackage.pickupDate%>">
                                </div>

                                <div class="inputGroup">
                                    <label for="">Status of item</label>
                                    <input type="text" name="" value="<%= singlepackage.status%>">
                                </div>
                                
                                <button class="btn">Update</button>
                            
                        </div>

                        </form>
                    </div>
                    
                </div>
            </div>
        </div>
    </main>
    <script type="module">
        import {hideSpinner, showSpinner, notification, closeNotification} from '/admin/js/notification.js';
        const btn = document.querySelector('.btn')
        const editForm = document.querySelector('.editForm')

        const queryStrings = URLSearchParams(window.location.search)
        const id = queryStrings.get('package')

        const senderName = editForm.senderName.value
        const senderEmail = editForm.senderEmail.value
        const receiverName = editForm.receiverName.value
        const receiverEmail = editForm.receiverEmail.value
        const receiverNumber = editForm.receiverNumber.value
        const destination = editForm.destination.value
        const item = editForm.package.value
        const weight = editForm.weight.value
        const currentLocation = editForm.currentLocation.value
        const depatureDate = editForm.depatureDate.value
        const deliveryDate = editForm.deliveryDate.value
        const shipmentMethod = editForm.shipmentMethod.value
        const PickupDate = editForm.PickupDate.value
        const status = editForm.status.value

        const packages = {
            senderName,
            senderEmail,
            receiverName,
            receiverEmail,
            receiverNumber,
            destination,
            item,
            weight,
            currentLocation,
            depatureDate,
            deliveryDate,
            shipmentMethod,
            PickupDate,
            status
        }



        const updatePackage = async () => {
            
            try {
                const response = await fetch(`/admin/edit/${id}`, {
                    method: 'PUT',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(packages)
                })

                if(!response.ok) {
                    console.log(response.statusText)
                }
                const json = await response.json()

            
            } catch (error) {
                console.log(error)
            }

        }
        
    </script>

<%- include('./partials/footer') %> 
